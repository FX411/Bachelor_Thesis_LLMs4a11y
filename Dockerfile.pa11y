# Basis-Image mit Puppeteer
FROM buildkite/puppeteer:v1.15.0

# Arbeitsverzeichnis im Container
WORKDIR /app

# Installiere pa11y-ci und Puppeteer
RUN npm install --global --unsafe-perm pa11y-ci

# Erstelle Ordner für Reports
RUN mkdir -p /app/reports

# Kopiere die pa11y-Konfiguration
COPY pa11y.config.json /app/pa11y.config.json

# Standardbefehl: Führt die Accessibility-Tests aus und speichert die Reports
CMD ["sh", "-c", "pa11y-ci -c /app/pa11y.config.json -j"]
